#!/usr/bin/env bash
set -eu -o pipefail

declare PROG_NAME=$0
declare DIR=$(cd "$(dirname "${BASH_SOURCE[0]}")"; pwd)
source $DIR/../../include/utils

main() {
  sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 575159689BEFB442

  local -r code_name=$(lsb_release -c | awk '{print $2}')

  local -r repository=$(printf 'deb http://download.fpcomplete.com/ubuntu %s main' $code_name)

  echo "$repository" | sudo tee /etc/apt/sources.list.d/fpco.list

  sudo apt update

  sudo apt install -y stack
}

main
